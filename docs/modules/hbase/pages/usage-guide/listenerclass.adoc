= Service exposition with ListenerClasses
:description: Configure HBase service exposure using ListenerClasses to control internal and external access for all roles.

The operator deploys a xref:listener-operator:listener.adoc[Listener] for each Master, Regionserver and Restserver pod.
They all default to only being accessible from within the Kubernetes cluster, but this can be changed by setting `.spec.{masters,regionServers,restServers}.config.listenerClass`:

[source,yaml]
----
spec:
  masters:
    config:
      listenerClass: external-unstable  # <1>
  regionServers:
    config:
      listenerClass: external-unstable
  restServers:
    config:
      listenerClass: external-unstable
----
<1> Specify one of `external-stable`, `external-unstable`, `cluster-internal` (the default setting is `cluster-internal`).
This can be set separately for all roles.

Externally-reachable endpoints (i.e. where listener-class = `external-unstable` or `external-unstable`) are written to a ConfigMap called `<cluster-name>-ui-endpoints`, listing each rolegroup by replica:

[source,yaml]
----
apiVersion: v1
data:
  hbase.master-0.ui: 172.19.0.3:32353
  hbase.master-1.ui: 172.19.0.5:31817
  hbase.regionserver-0.ui: 172.19.0.3:31719
  hbase.regionserver-1.ui: 172.19.0.5:30626
  hbase.restserver-0.ui: 172.19.0.3:31790
  hbase.restserver-1.ui: 172.19.0.5:32292
kind: ConfigMap
...
----
